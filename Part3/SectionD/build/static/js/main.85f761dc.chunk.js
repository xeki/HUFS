(this.webpackJsonpexcercises=this.webpackJsonpexcercises||[]).push([[0],{19:function(e,t,n){e.exports=n(42)},24:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(17),c=n.n(o),s=(n(24),n(8),n(2)),l=n(5),u=n(18),i=n(4),m=n.n(i),d=function(e){return e.persons.length?e.persons.map((function(t){return r.a.createElement("p",{key:t.name},"".concat(t.name," ").concat(t.number)," \xa0\xa0",r.a.createElement("button",{className:"btn delete",key:"id-".concat(t.name),onClick:function(){return function(e,t,n,a){var r="Delete ".concat(e.name,"?");window.confirm(r)&&m.a.delete("".concat("/api/persons","/").concat(e.id)).then((function(){console.log("Persons: ",t," ID: ",e.id);var r=t.filter((function(t){return t.id!==e.id}));n(r),a({error:!1,messageText:"".concat(e.name," information deleted successfully "),show:!0})})).catch((function(t){var n=t&&t.message?t.message:"Information of ".concat(e.name," has already been removed");a({error:!0,messageText:n,show:!0})}))}(t,e.persons,e.setPersons,e.setMessage)}},"Delete"))})):"No contact to display"},f=function(e){return r.a.createElement("div",null,r.a.createElement("span",{className:"label"}," Filter by name: ")," ",r.a.createElement("input",{type:"text",name:"filter_name",value:e.filterText,onChange:e.filterPersons}))},h=function(e){return r.a.createElement("form",null,r.a.createElement("h2",null,"Add new"),r.a.createElement("div",null,r.a.createElement("div",{className:"inputBlock"},r.a.createElement("span",{className:"label"},"Name:"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{name:"name",value:e.newName,onChange:e.handleNameChange}))),r.a.createElement("div",{className:"inputBlock"},r.a.createElement("span",{className:"label"},"Number:"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{name:"number",value:e.newPhone,onChange:e.handlePhoneChange})))),r.a.createElement("div",null,r.a.createElement("button",{className:"btn add",type:"submit",onClick:e.addPersons},"Add")))},g=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(""),i=Object(s.a)(c,2),g=i[0],p=i[1],v=Object(a.useState)(""),b=Object(s.a)(v,2),w=b[0],E=b[1],x=Object(a.useState)(""),j=Object(s.a)(x,2),O=j[0],N=j[1],y=Object(a.useState)([]),T=Object(s.a)(y,2),C=T[0],P=T[1],k=Object(a.useState)({error:null,messageText:"",show:!1}),L=Object(s.a)(k,2),S=L[0],D=L[1];Object(a.useEffect)((function(){m.a.get("/api/persons").then((function(e){return o(e.data)})).catch((function(e){return o([])}))}),[]);return r.a.createElement("div",null,r.a.createElement("div",{id:"message"},S.show&&function(e){var t=e.error,n=e.messageText,a=e.setMessage;console.log("Message text: ",n);var r=t?"error":"success",o=document.createElement("div");o.innerHTML="<div class=".concat(r,">\n    ").concat(n,"\n  </div>"),document.querySelector("#message").appendChild(o),setTimeout((function(){console.log("Timeout"),a({error:null,messageText:"",show:!1}),document.querySelector("#message").removeChild(o)}),4e3)}({error:S.error,messageText:S.messageText,setMessage:D})),r.a.createElement("h2",null,"Phonebook"),r.a.createElement(f,{filterText:O,filterPersons:function(e){e.preventDefault(),N(e.target.value);var t=n.filter((function(t){return t.name.toLocaleLowerCase().includes(e.target.value.trim().toLocaleLowerCase())}));P(t)}}),r.a.createElement(h,{newName:g,newPhone:w,handleNameChange:function(e){e.preventDefault(),p(e.target.value)},handlePhoneChange:function(e){e.preventDefault(),E(e.target.value)},addPersons:function(e){if(e.preventDefault(),g&&w){var t={name:g,number:w},a=n.filter((function(e){return e.name.toLocaleLowerCase()===g.toLocaleLowerCase()}));if(a.length)window.confirm("".concat(g," already exists do you want\n         to replace the old number with the new one?"))&&(!function(e,t,n,a){m.a.put("".concat("/api/persons","/").concat(e.id),e).then((function(){var r=t.map((function(t){return t.name===e.name?Object(l.a)(Object(l.a)({},t),e):t}));n(r),a({error:!1,messageText:"".concat(e.name," updated successfully"),show:!0})})).catch((function(t){var n=t&&t.message?t.message:"Error updating ".concat(e.name);a({error:!0,messageText:n,show:!0})}))}(Object(l.a)(Object(l.a)({},a[0]),t),n,o,D),p(""),E(""));else!function(e,t,n,a){m.a.post("/api/persons",e).then((function(r){n([].concat(Object(u.a)(t),[r.data])),a({error:!1,messageText:"".concat(e.name," added successfully"),show:!0})})).catch((function(t){console.log("Add person error: ",t);var n=t&&t.message?t.message:"Error adding ".concat(e.name);a({error:!0,messageText:n,show:!0})}))}(t,n,o,D),p(""),E("")}}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(d,{persons:O.trim()?C:n,setPersons:o,setMessage:D}))},p=function(){return r.a.createElement(g,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(p,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},8:function(e,t,n){}},[[19,1,2]]]);
//# sourceMappingURL=main.85f761dc.chunk.js.map