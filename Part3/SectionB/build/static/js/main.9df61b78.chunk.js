(this.webpackJsonpexcercises=this.webpackJsonpexcercises||[]).push([[0],{16:function(e,n,t){e.exports=t(41)},21:function(e,n,t){},22:function(e,n,t){},40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(14),c=t.n(o),s=(t(21),t(22),t(2)),l=t(4),u=t(15),i=t(3),m=t.n(i),d=(t(40),function(e){var n=e.error,t=e.messageText;console.log("Message text: ",e);var a=n?"error":"success",r=document.createElement("div");r.innerHTML="<div class=".concat(a,">\n    ").concat(t,"\n  </div>"),document.querySelector("#message").appendChild(r),setTimeout((function(){console.log("Timeout"),document.querySelector("#message").removeChild(r)}),4e3)}),f=function(e){return e.persons.length?e.persons.map((function(n){return r.a.createElement("p",{key:n.name},"".concat(n.name," ").concat(n.number)," \xa0\xa0",r.a.createElement("button",{key:"id-".concat(n.name),onClick:function(){return function(e,n,t,a){var r="Delete ".concat(e.name,"?");window.confirm(r)&&m.a.delete("".concat("/api/persons","/").concat(e.id)).then((function(){var r=n.filter((function(n){return n.id!==e.id}));t(r),a({error:!1,messageText:"".concat(e.name," information deleted successfully "),show:!0}),d({error:!1,messageText:"".concat(e.name," information deleted successfully ")})})).catch((function(){a({error:!0,messageText:"Information of ".concat(e.name," has already been removed"),show:!0}),d({error:!0,messageText:"Information of ".concat(e.name," has already been removed")})}))}(n,e.persons,e.setPersons,e.setMessage)}},"Delete"))})):"No contact to display"},h=function(e){return r.a.createElement("div",null,"filter by name: ",r.a.createElement("input",{type:"text",name:"filter_name",value:e.filterText,onChange:e.filterPersons}))},g=function(e){return r.a.createElement("form",null,r.a.createElement("h2",null,"Add new"),r.a.createElement("div",null,r.a.createElement("div",null,"name: ",r.a.createElement("input",{name:"name",value:e.newName,onChange:e.handleNameChange})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{name:"number",value:e.newPhone,onChange:e.handlePhoneChange}))),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",onClick:e.addPersons},"add")))},p=function(){var e=Object(a.useState)([]),n=Object(s.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)(""),i=Object(s.a)(c,2),p=i[0],v=i[1],w=Object(a.useState)(""),b=Object(s.a)(w,2),E=b[0],x=b[1],y=Object(a.useState)(""),T=Object(s.a)(y,2),j=T[0],O=T[1],C=Object(a.useState)([]),P=Object(s.a)(C,2),k=P[0],L=P[1],S=Object(a.useState)({error:null,messageText:"",show:!1}),D=Object(s.a)(S,2),N=(D[0],D[1]);Object(a.useEffect)((function(){m.a.get("/api/persons").then((function(e){return o(e.data)})).catch((function(e){return o([])}))}),[]);return r.a.createElement("div",null,r.a.createElement("div",{id:"message"}),r.a.createElement("h2",null,"Phonebook"),r.a.createElement(h,{filterText:j,filterPersons:function(e){e.preventDefault(),O(e.target.value);var n=t.filter((function(n){return n.name.toLocaleLowerCase().includes(e.target.value.trim().toLocaleLowerCase())}));L(n)}}),r.a.createElement(g,{newName:p,newPhone:E,handleNameChange:function(e){e.preventDefault(),v(e.target.value)},handlePhoneChange:function(e){e.preventDefault(),x(e.target.value)},addPersons:function(e){if(e.preventDefault(),p&&E){var n={name:p,number:E},a=t.filter((function(e){return e.name.toLocaleLowerCase()===p.toLocaleLowerCase()}));if(a.length)window.confirm("".concat(p," already exists do you want\n         to replace the old number with the new one?"))&&(!function(e,n,t,a){m.a.put("".concat("/api/persons","/").concat(e.id),e).then((function(){var r=n.map((function(n){return n.name===e.name?Object(l.a)({},n,{},e):n}));t(r),a({error:!1,messageText:"".concat(e.name," updated successfully"),show:!0}),d({error:!1,messageText:"".concat(e.name," updated successfully")})})).catch((function(){a({error:!0,messageText:"Error updating ".concat(e.name),show:!0}),d({error:!0,messageText:"Error updating ".concat(e.name)})}))}(Object(l.a)({},a[0],{},n),t,o,N),v(""),x(""));else!function(e,n,t,a){m.a.post("/api/persons",e).then((function(r){t([].concat(Object(u.a)(n),[r.data])),a({error:!1,messageText:"".concat(e.name," added successfully"),show:!0}),d({error:!1,messageText:"".concat(e.name," added successfully")})})).catch((function(){a({error:!0,messageText:"Error adding ".concat(e.name),show:!0}),d({error:!0,messageText:"Error adding ".concat(e.name),show:!0})}))}(n,t,o,N),v(""),x("")}}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(f,{persons:j.trim()?k:t,setPersons:o,setMessage:N}))},v=function(){return r.a.createElement(p,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[16,1,2]]]);
//# sourceMappingURL=main.9df61b78.chunk.js.map